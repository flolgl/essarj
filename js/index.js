/**
 * @type {Record<string, Record<string, Array<string>>>}
 */
const LANGUES = {
  "fr": {
    "title[data-page='contact']": ["Essarj | Nous contacter"],
    "title[data-page='about']": ["Essarj | A propos"],
    "title[data-page='home']": ["Essarj | Accueil"],
    "title[data-page='find-us']": ["Essarj | Où nous trouver ?"],
    ".nav-menu-list .nav-menu-item a": [
      "A propos",
      "Où nous trouver ?",
      "Nous contacter",
    ],
    ".contact-page .header-container .header-title-container h1": [
      "Nous contacter"
    ],
    ".contact-page .main-container form label": [
      "Nom",
      "Adresse mail",
      "Message"
    ],
    ".contact-page .main-container form input[type='submit']": [
      "Envoyer"
    ],
    ".find-us-page .header-container .header-title-container h1": [
      "Où nous trouver"
    ],
    ".about-us-page .header-container .header-title-container h1": [
      "A propos"
    ],
    ".about-us-page .main-container .content-title-container h3": [
      "A propos de nous"
    ],
    ".about-us-page .main-container .content-container span": [
      "L’huile d’olive essarj est obtenue à partir des authentiques variétés Chetwi et Weslati, à l’origine d’une huile au goût très personnalisé et exceptionnellement riche en polyphénols.",
      "Le caractère naturel des oliviers du « Domaine Sarra » de production de l’huile d’olive essarj fait que le caractère bio de cette huile est durablement préservable, et c’est sur la base de cette qualité que son label bio a été certifié.",
      "Le naming « essarj » correspond à celui de la montagne du même nom dont l’environnement sert d’accueil au site du domaine, un milieu naturel faisant partie intégrante de la fameuse Dorsale Tunisienne, une chaine de montagnes séparant le « Nord » et le « Centre & Sud » de la Tunisie, cumulant ainsi les bienfaits de ces deux très grands espaces aux personnalités écologiques et culturelles si affirmées.",
      "La flore du Jebel Serj est constituée d’une forêt de pins d’Alep, d’oliviers sauvages et de caroubiers, avec toute une singularité naturelle, celle de la présence de l’« érable », une espèce d’arbres d’une exceptionnelle rareté.",
      "La faune de la montagne Serj est constituée de servals, sangliers, chacals, renards, hérissons et surtout de la race « Gazelle de l’Atlas », disparue pendant un siècle et réintroduite et reconstituée avec succès depuis une quinzaine d’années grâce à une judicieuse coopération Tuniso-Espagnole.",
      "Parmi la faune on retrouve également beaucoup d’espèces d’oiseaux comme l’aigle botté, la buse féroce, le faucon pèlerin, l’aigle royal et la perdrix « gambra ».",
      "Toute cette richesse florale et faunique est présente au niveau du « Parc National de Jebel Serj », protégé et entretenu par l’Etat Tunisien.",
      "En plus de ce qui précède, le site du Jebel Serj reste mondialement connu pour sa très célèbre Grotte « Aïn Dhab », ou encore la « Source d’Or », un haut lieu de la préservation écologique du milieu, au fabuleux jeu de couleurs et de lumières offerts par ses généreuses stalactites et avec ses nombreuses « salles » non encore entièrement explorées.",
    ],
    ".header-container .breadcrumbs-previous": [
      "Accueil"
    ],
    ".contact-page .header-container .breadcrumbs__crumb": [
      "Nous contacter"
    ],
    ".find-us-page .header-container .breadcrumbs__crumb": [
      "Nous retrouver"
    ],
    ".about-us-page .header-container .breadcrumbs__crumb": [
      "A propos"
    ],
    "footer .footer-content .footer-list.menu-list .title-list": [
      "Menu"
    ],
    "footer .footer-content .footer-list.menu-list ul li a": [
      "Accueil",
      "Nous retrouver",
      "A propos",
      "Nous contacter"
    ],
    "footer .footer-content .footer-list.socials-list .title-list": [
      "Réseaux sociaux"
    ]
  },
  "en": {
    "title[data-page='contact']": ["Essarj | Contact"],
    "title[data-page='about']": ["Essarj | About us"],
    "title[data-page='home']": ["Essarj | Home"],
    "title[data-page='find-us']": ["Essarj | Where to find us?"],
    ".nav-menu-list .nav-menu-item a": [
      "About us",
      "Where to find us?",
      "Contact",
    ],
    ".contact-page .header-container .header-title-container h1": [
      "Contact-us"
    ],
    ".contact-page .main-container form label": [
      "Name",
      "Email adress",
      "Message"
    ],
    ".contact-page .main-container form input[type='submit']": [
      "Send"
    ],
    ".find-us-page .header-container .header-title-container h1": [
      "Find us"
    ],
    ".about-us-page .header-container .header-title-container h1": [
      "About us"
    ],
    ".about-us-page .main-container .content-title-container h3": [
      "About us"
    ],
    ".about-us-page .main-container .content-container span": [
      "Essarj olive oil is obtained from authentic Chetwi and Weslati varieties, resulting in an oil with a highly personalized taste and exceptionally rich in polyphenols.",
      "The natural character of the olive trees at the \"Domaine Sarra\" production site of Essarj olive oil ensures that the bio character of this oil is permanently preserved, and it is on the basis of this quality that its organic label has been certified.",
      "The \"essarj\" name corresponds to that of the mountain of the same name whose environment serves as the location of the domain site, a natural environment that is an integral part of the famous Tunisian Dorsal, a mountain chain separating the \"North\" and the \"Center & South\" of Tunisia, thus cumulating the benefits of these two great spaces with such assertive ecological and cultural personalities.",
      "The flora of Jebel Serj consists of a forest of Aleppo pines, wild olive trees and carob trees, with a natural singularity, that of the presence of the \"maple\", a species of trees of exceptional rarity.",
      "The fauna of Mount Serj consists of servals, wild boars, jackals, foxes, hedgehogs and especially the \"Atlas Gazelle\" breed, which disappeared for a century and successfully reintroduced and reconstituted in the past 15 years thanks to a wise Tunisian-Spanish cooperation.",
      "Among the wildlife, there are also many bird species such as the booted eagle, the fierce buzzard, the peregrine falcon, the royal eagle and the \"gambra\" partridge. All this floral and faunal wealth is present at the \"Jebel Serj National Park\", protected and maintained by the Tunisian state.",
      "In addition to the above, the Jebel Serj site is globally known for its famous \"Ain Dhab Cave\" or \"Golden Source\", a high place for the ecological preservation of the environment, with the fabulous play of colors and lights offered by its generous stalactites and with its many \"rooms\" not yet fully explored.",
      ""
    ],
    ".header-container .breadcrumbs-previous": [
      "Home"
    ],
    ".contact-page .header-container .breadcrumbs__crumb": [
      "Contact"
    ],
    ".find-us-page .header-container .breadcrumbs__crumb": [
      "Where to find us"
    ],
    ".about-us-page .header-container .breadcrumbs__crumb": [
      "About us"
    ],
    "footer .footer-content .footer-list.menu-list .title-list": [
      "Menu"
    ],
    "footer .footer-content .footer-list.menu-list ul li a": [
      "Home",
      "Where to find us",
      "About us",
      "Contact"
    ],
    "footer .footer-content .footer-list.socials-list .title-list": [
      "Socials"
    ]
  }
}

const nav = document.querySelector("nav");
window.addEventListener("scroll", () => scrollY > 30 ? nav.classList.add("scrolled") : nav.classList.remove("scrolled"));


const navButton = nav.querySelector(".menu-icon");
const checkBox = navButton.querySelector("input[type='checkbox']");
const navMenu = document.querySelector(".nav-menu-container");
const navButtonRemove = navMenu.querySelector(".cross-container svg ");
navButton.addEventListener("click", () => navMenu.classList.add("show"));
const wrapper = document.querySelector(".nav-menu-container .wrapper");

const languageSelector = document.querySelector(".nav-menu-container .langue-container select");
/*
languageSelectorOptions.forEach(value => {
  value.addEventListener("click", evt => {
    setLangageCookie(evt.target.value);
    init();
  })
});
 */

languageSelector.addEventListener("change", () => {
  setLangageCookie(languageSelector.options[languageSelector.selectedIndex].value);
  init();
})

const removeNavBar = () => {
  navMenu.classList.remove("show");
  checkBox.checked = false;
}
wrapper.addEventListener("click", () => removeNavBar())
navButtonRemove.addEventListener("click", () => removeNavBar());

const setLangageCookie = locale => document.cookie = `langue=${locale}; SameSite=Lax;`;

const getLangage = () => {
  const cookie = document.cookie.split("; ").find((row) => row.startsWith("langue="))?.split("=")[1];
  return cookie ? [cookie, LANGUES[cookie ? cookie : navigator.language]] : ["en", LANGUES["en"]];
}

const init = () =>  {
  const [language, locale] = getLangage();
  languageSelector.value = language;
  Object.entries(locale).forEach(([key, value]) => {

    if (key.includes("submit"))
      return document.querySelectorAll(key)?.forEach((div, index) => div.value = value[index]);

    document.querySelectorAll(key)?.forEach((div, index) => div.innerText = value[index]);
  });
}

init();



/**
 * Où nous trouver
 * A propos de nous
 * Nous contacter
 * Langue : Anglais/FR
 * Réseaux sociaux
 */
